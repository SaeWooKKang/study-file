# 메모리 할당과 해제 

## 생각해보기
제한된 메모리를 가지고 프로그래밍을 할 때 메모리를 해제하지 않으면 어떤 문제가 발생할 수 있을까요?
```
메모리 누수가 발생해 프로그램이 느려지고 에러가 발생한다.
```

- - -

## 요약

메모리 할당과 해제

> 메모리 할당은 'malloc' 함수로 
> 메모리 해제는 'free' 함수로 


valgrind 프로그램을 사용하면 메모리 관련 문제를 확인 할 수 있다.  

다음의 코드는 두 가지 문제가 있다.  
문제  
1. 버퍼 오버플로우
2. 메모리 누수

해결
1. 버퍼 오버플로우는 할당된 공간을 넘어 접근하면 생긴다.
-> x[10] = 0;을 x[9] = 0;으로 해결 가능하다.
2. 메모리 누수는 malloc으로 할당한 메모리를 해제하지 않아서 생긴다.
-> free 함수로 메모리 해제하자
``` c
#include <stdio.h>

void f(void)
{
  int *x = malloc(10 * sizeof(int));
  x[10] = 0;
}

int main(void)
{
  f();
  return 0;
}
```

메모리 누수
```
메모리 할당 후 해제 하지 않으면 저장한 값은   
쓰레기 값으로 남게 되어 메모리 낭비가 발생한다.  
이를 '메모리 누수'라고 한다. 
```